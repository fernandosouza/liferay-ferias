<!DOCTYPE html>
<html>
<head>
    <title>Liferay Ferias</title>
    <link rel="stylesheet" href="http://liferay.github.io/lexicon/css/lexicon-font-awesome.css">
    <link rel="stylesheet" href="http://liferay.github.io/lexicon/css/atlas-font-awesome.css">

    <script src="http://cdn.wedeploy.com/api/latest/wedeploy.js"></script>

    <!-- API KEY: AIzaSyBIb3sisfumDyEAUKSZGNbjMFqfGBEEGuU -->
    <!-- Here is your client ID: 284105657488-ee2rvit8dvcveoe9qonprfpkb2iht46a.apps.googleusercontent.com -->
    <!-- Here is your client secret: Z8opyvHjA5k0qtiw7jxL451r -->
    <!-- http://liferayferiasauth.liferayferias.wedeploy.me/oauth/token -->
</head>
<body>
<div class="toolbar">
    <span class="user-name">Fulano de tal <span class="available-days">(30 dias)</span></span>
</div>

<nav class="tabs">
    <ul>
        <li>
            <a href="/my_requests.html">My requests</a>
        </li>
        <li>
            <a href="/requests_to_me.html">Requests sent to me</a>
        </li>
    </ul>
</nav>

<div class="my-requests">
    <label>No request now</label>
</div>

<form>
    <fieldset>
        <input type="hidden" name="requester" value="">
        <div>
            <label for="first_day">First day</label>
            <input name="first_day" />
        </div>
        <div>
            <label for="last_day">Last day</label>
            <input name="last_day" />
        </div>
        <div>
            <label for="intention">Intention</label>
            <select name="intention">
                <option value="1">January
            </select>
        </div>
        <div>
            <input type="checkbox" name="sell">
            <label for="sell">Sell?</sell>
        </div>
        <input type="submit">
    </fieldset>
    <button class="create">Create request</create>
</form>

<script>
    var auth = WeDeploy.auth('http://liferayferiasauth.liferayferias.wedeploy.me');

    auth.signInWithEmailAndPassword("test@liferay.com", "senha123")
    .then(function(user) {
        var currentUser = auth.currentUser;
        console.log('trololol', currentUser);
        
        var form = document.getElementsByTagName('form')[0];

        form.addEventListener('submit', function(event) {
            var button = document.getElementByClassName('create')[0];
            var startDate = document.getElementsByName('first_day');
            var endfDate = document.getElementsByName('last_day');
            var managerId = parseInt(select.value);

            WeDeploy
                .url('http://liferayferiasdata.liferayferias.wedeploy.me/requests/')
                .post({
                    userId: 12345,
                    managerId: 54321,
                    startDate: startDate,
                    endDate: endDate,
                    sellDays: false,
                    intention: 2,
                    status: "pending"
                })
                .get()
                .then(function(stuff) {
                    for (var i = requestToMe.length - 1; i >= 0; i--) {
                        console.log("request", requestToMe[i]);
                    };
                });

            event.preventDefault();
        });
        
    })
    .catch(function(err) {  
      console.log('glugluglu', err);
    });
</script>

<script src="my_request.js"></script>



